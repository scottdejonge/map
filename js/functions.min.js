/**
 * Copyright 2013 Scott de Jonge
 *
 * @version 0.1.1
 * @url beta.accessmap.com.au
 *
 */function HomeControl(e,t){e.style.padding="10px 10px 0px 0px";var n=document.createElement("div");n.style.backgroundColor="#43454B";n.style.borderStyle="";n.style.borderWidth="";n.style.cursor="pointer";n.style.textAlign="center";n.title="Click to Zoom In";e.appendChild(n);var r=document.createElement("div");r.style.fontFamily="Arial,sans-serif";r.style.fontSize="20px";r.style.padding="10px";r.style.color="#FFFFFF";r.innerHTML='<i class=" icon-location"></i>';n.appendChild(r);google.maps.event.addDomListener(n,"click",function(){console.log("Home Control");navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){var e=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);console.log(e);t.panTo(e)}):handleNoGeolocation(!1)})}function ZoomInControl(e,t){e.style.padding="10px 0px 0px 0px";var n=document.createElement("div");n.style.backgroundColor="#43454B";n.style.borderStyle="";n.style.borderWidth="";n.style.cursor="pointer";n.style.textAlign="center";n.title="Click to Zoom In";e.appendChild(n);var r=document.createElement("div");r.style.fontFamily="Arial,sans-serif";r.style.fontSize="20px";r.style.padding="10px";r.style.color="#FFFFFF";r.innerHTML='<i class=" icon-plus"></i>';n.appendChild(r);google.maps.event.addDomListener(n,"click",function(){console.log("Zoom In Control");var e=t.getZoom()+1;t.setZoom(e)})}function ZoomOutControl(e,t){e.style.padding="10px 0px 0px 0px";var n=document.createElement("div");n.style.backgroundColor="#43454B";n.style.borderStyle="";n.style.borderWidth="";n.style.cursor="pointer";n.style.textAlign="center";n.title="Click to Zoom In";e.appendChild(n);var r=document.createElement("div");r.style.fontFamily="Arial,sans-serif";r.style.fontSize="20px";r.style.padding="10px";r.style.color="#FFFFFF";r.innerHTML='<i class=" icon-minus"></i>';n.appendChild(r);google.maps.event.addDomListener(n,"click",function(){console.log("Zoom OUt Control");var e=t.getZoom()-1;t.setZoom(e)})}function findTypeColor(e){for(var t=0;t<typeArray.length;t++)if(typeArray[t].type==e)return typeArray[t].color}function initialize(){function t(e){function p(){var e=map.getBounds(),t={bounds:e,radius:"500"};$("#loading").show();service.nearbySearch(t,v)}function d(){for(var e=0;e<markers.length;e++)markers[e].setMap(null);markers=[]}function v(e,t){if(t==google.maps.places.PlacesServiceStatus.OK)for(var n=0;n<e.length;n++){var r=e[n];m(e[n]);$("#loading").hide()}}function m(e){var t=map.getBounds(),r=findTypeColor(e.types[0]),i={path:"M 100 0 L 0 0 L 0 100 L 35 100 L 50 120 L 65 100 L 100 100 Z",fillColor:r,fillOpacity:1,strokeColor:"",strokeWeight:0,scale:.5},s={path:"M 100 0 L 0 0 L -150 0 L -150 100 L 0 100 L 35 100 L 50 120 L 65 100 L 100 100 L 250 100 L 250 0 Z",fillColor:r,fillOpacity:1,strokeColor:"",strokeWeight:0,scale:.5},o=new n({map:map,title:e.name,position:e.geometry.location,zIndex:9,icon:i,label:'<i class="icon-'+e.types[0]+'"></i>'});google.maps.event.addListener(o,"mouseover",function(){console.log("Hovering "+e.name);o.setIcon(s)});google.maps.event.addListener(o,"mouseout",function(){o.setIcon(i)});google.maps.event.addListener(o,"click",function(){console.log(e.name+" Marker Clicked");var t='<div class="location" data-id="'+e.id+'">'+'<div class="icon" style="background:'+r+';"><i class="icon-'+e.types[0]+'"></i></div>'+"<h1>"+e.name+"</h1>"+"<p>"+e.types[0].replace(/_/g," ")+"</p>"+"<p>"+e.formatted_address+"</p>"+"<p>"+e.formatted_phone_number+"</p>"+"<p>"+e.rating+"</p>"+"<p>"+e.website+"</p>"+"<form>"+'<label for="comment">Comment</label>'+'<textarea type="text" name="comment" id="comment"></textarea>'+'<input type="submit">'+"</form>";"</div>";sidebar.innerHTML="";sidebar.innerHTML=t});markers.push(o);t.extend(e.geometry.location)}userLocation=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);var t={zoom:16,scrollWheel:!1,center:userLocation,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,panControl:!1,zoomControl:!1,scaleControl:!1,streetViewControl:!1,styles:[{stylers:[{visibility:"simplified"}]},{elementType:"labels",stylers:[{visibility:"off"}]}]};map=new google.maps.Map(document.getElementById("map"),t);service=new google.maps.places.PlacesService(map);var r=document.createElement("DIV"),i=new HomeControl(r,map);r.index=1;map.controls[google.maps.ControlPosition.TOP_RIGHT].push(r);var s=document.createElement("DIV"),o=new ZoomOutControl(s,map);s.index=1;map.controls[google.maps.ControlPosition.TOP_RIGHT].push(s);var u=document.createElement("DIV"),a=new ZoomInControl(u,map);u.index=1;map.controls[google.maps.ControlPosition.TOP_RIGHT].push(u);var f=new google.maps.InfoWindow,l;google.maps.event.addListener(map,"idle",function(e){var t=map.getBounds(),n=t.getNorthEast(),r=t.getSouthWest(),i=[n,new google.maps.LatLng(n.lat(),r.lng()),r,new google.maps.LatLng(r.lat(),n.lng()),n];if(l)l.setPath(i);else{l=new google.maps.Polyline({path:i,strokeColor:"#333399",strokeOpacity:1,strokeWeight:4});l.setMap(map)}var s=document.getElementById("info")});var c=document.getElementById("search-input"),h=new google.maps.places.SearchBox(c);google.maps.event.addListener(h,"places_changed",function(){d();$("#loading").show();var e=h.getPlaces(),t=map.getBounds();for(var n=0;n<e.length;n++){m(e[n]);$("#loading").hide()}map.fitBounds(t)});google.maps.event.addListener(map,"bounds_changed",function(){var e=map.getBounds();h.setBounds(e)})}var e=new google.maps.LatLng(-27.5001674,153.0151598);if(navigator.geolocation)navigator.geolocation.getCurrentPosition(t,function(){handleNoGeolocation(!0)});else{browserSupportFlag=!1;handleNoGeolocation(browserSupportFlag)}var n=function(e){google.maps.Marker.apply(this,arguments);if(e.label){this.MarkerLabel=new r({map:this.map,marker:this,text:e.label});this.MarkerLabel.bindTo("position",this,"position")}};n.prototype=new google.maps.Marker;n.prototype.setMap=function(){google.maps.Marker.prototype.setMap.apply(this,arguments);this.MarkerLabel&&this.MarkerLabel.setMap.apply(this.MarkerLabel,arguments)};var r=function(e){var t=this;this.setValues(e);this.div=document.createElement("div");this.div.className="marker-label";var n=document.createElement("span");n.className="marker-icon";this.div.appendChild(n);google.maps.event.addDomListener(this.div,"click",function(e){e.stopPropagation&&e.stopPropagation();google.maps.event.trigger(t.marker,"click")})};r.prototype=new google.maps.OverlayView;r.prototype.onAdd=function(){var e=this.getPanes().overlayImage.appendChild(this.div),t=this;this.listeners=[google.maps.event.addListener(this,"position_changed",function(){t.draw()}),google.maps.event.addListener(this,"text_changed",function(){t.draw()}),google.maps.event.addListener(this,"zindex_changed",function(){t.draw()})]};r.prototype.onRemove=function(){this.div.parentNode.removeChild(this.div);for(var e=0,t=this.listeners.length;e<t;++e)google.maps.event.removeListener(this.listeners[e])};r.prototype.draw=function(){var e=this.getProjection(),t=e.fromLatLngToDivPixel(this.get("position")),n=this.div;n.style.left=t.x+"px";n.style.top=t.y+"px";n.style.display="block";n.style.zIndex=this.get("zIndex");this.div.innerHTML=this.get("text").toString()}}function loadScript(){var e=document.createElement("script");e.type="text/javascript";e.src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=places&sensor=true&callback=initialize";document.body.appendChild(e)}Mousetrap.bind(["command+f","ctrl+f"],function(e){document.getElementById("search-input").focus();return!1});var typeArray=[{type:"accounting",color:"#333399"},{type:"airport",color:"#333399"},{type:"amusement_park",color:"#333399"},{type:"aquarium",color:"#333399"},{type:"art_gallery",color:"#333399"},{type:"atm",color:"#333399"},{type:"bakery",color:"#333399"},{type:"bank",color:"#333399"},{type:"bar",color:"#B22B76"},{type:"beauty_salon",color:"#333399"},{type:"bicycle_store",color:"#EA8442"},{type:"book_store",color:"#EA8442"},{type:"bowling_alley",color:"#333399"},{type:"bus_station",color:"#333399"},{type:"cafe",color:"#B22B76"},{type:"campground",color:"#333399"},{type:"car_dealer",color:"#333399"},{type:"car_rental",color:"#333399"},{type:"car_repair",color:"#333399"},{type:"car_wash",color:"#333399"},{type:"casino",color:"#333399"},{type:"cemetery",color:"#333399"},{type:"church",color:"#333399"},{type:"city_hall",color:"#333399"},{type:"clothing_store",color:"#EA8442"},{type:"convenience_store",color:"#EA8442"},{type:"courthouse",color:"#333399"},{type:"dentist",color:"#333399"},{type:"department_store",color:"#EA8442"},{type:"doctor",color:"#333399"},{type:"electrician",color:"#333399"},{type:"electronics_store",color:"#EA8442"},{type:"embassy",color:"#333399"},{type:"establishment",color:"#333399"},{type:"finance",color:"#333399"},{type:"fire_station",color:"#333399"},{type:"florist",color:"#333399"},{type:"food",color:"#333399"},{type:"funeral_home",color:"#333399"},{type:"furniture_store",color:"#EA8442"},{type:"gas_station",color:"#333399"},{type:"general_contractor",color:"#333399"},{type:"grocery_or_supermarket",color:"#333399"},{type:"gym",color:"#333399"},{type:"hair_care",color:"#333399"},{type:"hardware_store",color:"#EA8442"},{type:"health",color:"#333399"},{type:"hindu_temple",color:"#333399"},{type:"home_goods_store",color:"#EA8442"},{type:"hospital",color:"#333399"},{type:"insurance_agency",color:"#333399"},{type:"jewelry_store",color:"#EA8442"},{type:"laundry",color:"#333399"},{type:"lawyer",color:"#333399"},{type:"library",color:"#333399"},{type:"liquor_store",color:"#EA8442"},{type:"local_government_office",color:"#333399"},{type:"locksmith",color:"#333399"},{type:"lodging",color:"#E84C2D"},{type:"meal_delivery",color:"#333399"},{type:"meal_takeaway",color:"#C91409"},{type:"mosque",color:"#333399"},{type:"movie_rental",color:"#333399"},{type:"movie_theater",color:"#333399"},{type:"moving_company",color:"#333399"},{type:"museum",color:"#333399"},{type:"night_club",color:"#B22B76"},{type:"painter",color:"#333399"},{type:"park",color:"#A6BC59"},{type:"parking",color:"#285AAE"},{type:"pet_store",color:"#EA8442"},{type:"pharmacy",color:"#333399"},{type:"physiotherapist",color:"#333399"},{type:"place_of_worship",color:"#333399"},{type:"plumber",color:"#333399"},{type:"police",color:"#333399"},{type:"post_office",color:"#333399"},{type:"real_estate_agency",color:"#333399"},{type:"restaurant",color:"#333399"},{type:"roofing_contractor",color:"#333399"},{type:"rv_park",color:"#333399"},{type:"school",color:"#EDB356"},{type:"shoe_store",color:"#EA8442"},{type:"shopping_mall",color:"#333399"},{type:"spa",color:"#333399"},{type:"stadium",color:"#EED163"},{type:"storage",color:"#333399"},{type:"store",color:"#EA8442"},{type:"subway_station",color:"#333399"},{type:"synagogue",color:"#333399"},{type:"taxi_stand",color:"#333399"},{type:"train_station",color:"#333399"},{type:"travel_agency",color:"#333399"},{type:"university",color:"#EDB356"},{type:"veterinary_care",color:"#333399"},{type:"zoo",color:"#333399"},{type:"locality",color:"#C9574D"}],map,mapBounds,markers=[],sidebar=document.getElementById("sidebar");window.onload=loadScript;